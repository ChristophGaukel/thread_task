

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Readme &mdash; thread_task 0.0.5 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'0.0.5',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> thread_task
          

          
          </a>

          
            
            
              <div class="version">
                0.0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Readme</a></li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#wrapping-a-function-into-a-task-object">Wrapping a function into a Task object</a></li>
<li><a class="reference internal" href="#building-chains-of-tasks">Building chains of tasks</a></li>
<li><a class="reference internal" href="#stop-and-continue">Stop and continue</a></li>
<li><a class="reference internal" href="#periodic-actions">Periodic actions</a></li>
<li><a class="reference internal" href="#repeated-actions">Repeated actions</a></li>
<li><a class="reference internal" href="#tree-structured-tasks">Tree structured Tasks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-thread_task">API documentation</a><ul>
<li><a class="reference internal" href="#static-methods">Static methods</a></li>
<li><a class="reference internal" href="#classes">Classes</a><ul>
<li><a class="reference internal" href="#task">Task</a></li>
<li><a class="reference internal" href="#sleep">Sleep</a></li>
<li><a class="reference internal" href="#periodic">Periodic</a></li>
<li><a class="reference internal" href="#repeated">Repeated</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#index">Index</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">thread_task</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Readme</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="readme">
<h1>Readme<a class="headerlink" href="#readme" title="Permalink to this headline">¶</a></h1>
<p>thread_task is built on top of
<a class="reference external" href="https://docs.python.org/3.8/library/threading.html">threading</a>
and allows to organize tasks and run them parallel.</p>
<p>You can:</p>
<ul class="simple">
<li>build chains of tasks, which execute tasks sequentially in a single thread</li>
<li>build parent child dependencies, which allows to construct trees of tasks</li>
<li>stop tasks, which also stops the execution of child tasks</li>
<li>continue tasks, which also continues the execution of child tasks</li>
<li>restart finished or stopped tasks</li>
<li>join tasks, which means waiting until the task and its children are finished</li>
</ul>
<p>A thread_task is not like a function, it doesn’t return results. Think
of it as an instruction to a reliable but independently acting
person. If feedback is needed, this can be done by callback
functions. You can also use mutable objects, which tasks get in
as arguments.</p>
<p>The following task types exist:</p>
<ul class="simple">
<li>Task: Executes a single task or a chain of tasks</li>
<li>Repeated: Executes a task multiple times.</li>
<li>Periodic: Executes a task periodically</li>
<li>Sleep: sleeps for a given time, is similar to
<a class="reference external" href="https://docs.python.org/3.8/library/time.html#time.sleep">time.sleep</a>,
but can be stopped and continued</li>
</ul>
</div>
<div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="wrapping-a-function-into-a-task-object">
<h2>Wrapping a function into a Task object<a class="headerlink" href="#wrapping-a-function-into-a-task-object" title="Permalink to this headline">¶</a></h2>
<p><strong>Task</strong> allows to execute a function (or any other callable) in its own thread,
parallel to the commands of the main program.
Here, we define a funtion print_it. We wrap it into a Task object
and then call method start of the Task object.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">thread_task</span> <span class="kn">import</span> <span class="n">Task</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>


<span class="k">def</span> <span class="nf">print_it</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span><span class="p">),</span>
        <span class="s1">&#39;hello, world!&#39;</span>
    <span class="p">)</span>


<span class="n">Task</span><span class="p">(</span><span class="n">print_it</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span><span class="p">),</span>
    <span class="s1">&#39;the last program statement&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Method start has an optional argument <strong>delay</strong>, that
allows to add a timespan before the execution starts.
The program produced this output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>15:48:11.626177 the last program statement
15:48:13.626036 hello, world!
</pre></div>
</div>
<p>Indeed, function print_it is executed 2 sec. after the last program statement.
This could also be done with
<a class="reference external" href="https://docs.python.org/3.8/library/threading.html#threading.Timer">threading.Timer</a>.</p>
</div>
<div class="section" id="building-chains-of-tasks">
<h2>Building chains of tasks<a class="headerlink" href="#building-chains-of-tasks" title="Permalink to this headline">¶</a></h2>
<p>Task objects allow to append other Task objects and the result is also
a Task object. To be precise, Task objects are designed as linked
lists and the constructor returns the special case of a single chain
link. Appending modifies the Task object and adds one or multiple
chain links, but the result still is a Task object.  When a Task is
started, its chain links are executed one after the other.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">thread_task</span> <span class="kn">import</span> <span class="n">Task</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>


<span class="k">def</span> <span class="nf">print_it</span><span class="p">(</span><span class="n">txt</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span><span class="p">),</span>
        <span class="n">txt</span>
    <span class="p">)</span>


<span class="n">Task</span><span class="p">(</span>
    <span class="n">print_it</span><span class="p">,</span>  <span class="c1"># action</span>
    <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;hello,&#39;</span><span class="p">,),</span>
    <span class="n">duration</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
    <span class="n">Task</span><span class="p">(</span>
        <span class="n">print_it</span><span class="p">,</span>  <span class="c1"># action</span>
        <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;world!&#39;</span><span class="p">,)</span>
    <span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>Here, we appended one Task object and built a chain of two tasks. The
first prints <code class="docutils literal"><span class="pre">hello,</span></code>, the second prints <code class="docutils literal"><span class="pre">world!</span></code>. We set the
first Task’s <strong>duration</strong> to 2 sec.,  which sets a timespan between the
two printings. This example also shows, how positional arguments are
bount to the actions. This is done with keyword argument <strong>args</strong>,
which expects a tuple of values.</p>
<p>The output was:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>15:55:31.644113 hello,
15:55:33.644894 world!
</pre></div>
</div>
</div>
<div class="section" id="stop-and-continue">
<h2>Stop and continue<a class="headerlink" href="#stop-and-continue" title="Permalink to this headline">¶</a></h2>
<p>Task objects can be stopped and continued. Stopping means,
that method <strong>stop</strong> <em>tells</em> the Task to finish the current atom of execution, then stop.
The Task object will <em>know</em> its state and is ready to continue the execution, which is done by
method <strong>cont</strong>.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">thread_task</span> <span class="kn">import</span> <span class="n">Task</span><span class="p">,</span> <span class="n">Sleep</span><span class="p">,</span> <span class="n">concat</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="k">def</span> <span class="nf">print_it</span><span class="p">(</span><span class="n">txt</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span><span class="p">),</span>
        <span class="n">txt</span>
    <span class="p">)</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">concat</span><span class="p">(</span>
    <span class="n">Task</span><span class="p">(</span>
        <span class="n">print_it</span><span class="p">,</span>  <span class="c1"># action</span>
        <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;hello,&#39;</span><span class="p">,)</span>
    <span class="p">),</span>
    <span class="n">Sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="n">Task</span><span class="p">(</span>
        <span class="n">print_it</span><span class="p">,</span>  <span class="c1"># action</span>
        <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;world!&#39;</span><span class="p">,)</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">action_stop</span> <span class="o">=</span> <span class="n">print_it</span>
<span class="n">t</span><span class="o">.</span><span class="n">args_stop</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;task has been stopped&#39;</span><span class="p">,)</span>
<span class="n">t</span><span class="o">.</span><span class="n">action_cont</span> <span class="o">=</span> <span class="n">print_it</span>
<span class="n">t</span><span class="o">.</span><span class="n">args_cont</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;task has been continued&#39;</span><span class="p">,)</span>

<span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">cont</span><span class="p">()</span>
</pre></div>
</div>
<p>The Task object itself is nearly the same as above. But we built it
with function <strong>concat</strong> instead of method append. This is just
another flavour and you can use the one, you prefer. Class <strong>Sleep</strong>
(a subclass of Task) is an alternative to setting a duration, but
Sleep sets an additional timespan of 2 sec., where duration adds a
waiting time after the execution of print_it to get 2
sec. alltogether. In our case of a short execution, this makes
practically no difference.</p>
<p>Here we did not use an anonymous Task object. We referenced it with
variable <strong>t</strong>. The reference allows us to get or set
arguments. Setting arguments mofifies the Task. The reference is also
needed to stop or continue the Task object.</p>
<p>We use the attributes <strong>action_stop</strong> and <strong>args_stop</strong> to add special
logic for the the stopping process. action_stop must be a callable and
a third attribute kwargs_stop allows to set keyword arguments for
action_stop. action_stop could include some shutdown commands, here it
prints a message. The arguments <strong>action_cont</strong> and <strong>args_cont</strong>
(together with kwargs_cont) play the same role for the continuation
process.</p>
<p>Calling the methods <strong>stop</strong> and <strong>cont</strong> does the job of stopping and
continuing and the output shows, that class <strong>Sleep</strong> can be
interrupted (as duration would have too). In the middle of the sleeping,
the stopping takes place. When the Task is continued, it first ends
its sleeping, then it executes the next callable.</p>
<p>Our output was:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>16:04:25.626024 hello,
16:04:26.627578 task has been stopped
16:04:30.632176 task has been continued
16:04:31.631967 world!
</pre></div>
</div>
<p>There were 1 sec. between starting and stopping and 4 sec. between stopping and continuing.
The task was designed for a timespan of 2 sec. between <code class="docutils literal"><span class="pre">hello,</span></code> and <code class="docutils literal"><span class="pre">world!</span></code>,
which became 6 sec. with the additional delay between stopping and continuing.</p>
</div>
<div class="section" id="periodic-actions">
<h2>Periodic actions<a class="headerlink" href="#periodic-actions" title="Permalink to this headline">¶</a></h2>
<p><strong>Periodic</strong> is another subclass of Task and allows to do things
periodically.  With <strong>intervall</strong>, it has one more positional argument,
which is the timespan between two executions of action. The
keyword argument <strong>num</strong> limits the number of
executions. Alternatively, the executions end, when action returns
<code class="docutils literal"><span class="pre">True</span></code>.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">thread_task</span> <span class="kn">import</span> <span class="n">Task</span><span class="p">,</span> <span class="n">Periodic</span>

<span class="c1"># introduction</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Help me to give an enthusiastic welcome to our speaker.&#39;</span><span class="p">)</span>

<span class="c1"># speech</span>
<span class="n">Periodic</span><span class="p">(</span>
    <span class="mi">2</span><span class="p">,</span>  <span class="c1"># intervall</span>
    <span class="nb">print</span><span class="p">,</span>  <span class="c1"># action</span>
    <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;bla&#39;</span><span class="p">,),</span>
    <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;flush&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="n">num</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">duration</span><span class="o">=</span><span class="mi">5</span>
<span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
    <span class="n">Task</span><span class="p">(</span>
        <span class="nb">print</span><span class="p">,</span>  <span class="c1"># action</span>
        <span class="n">duration</span><span class="o">=</span><span class="mi">1</span>
    <span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

<span class="c1"># reaction</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warm applause.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This program consists of three parts, the introduction of the speaker,
the speech und the reaction of the audience. The speech itself is a
chain of a Periodic and a Task object. It prints the string <code class="docutils literal"><span class="pre">bla</span></code>
three times. Command print is called with two keyword arguments, end
and flush (see <a class="reference external" href="https://docs.python.org/3.8/library/functions.html#print">print</a> for the
details). Between each call of print, there is a timespan of 2 sec. At
the end, print is called without any arguments, which prints a
newline. The Periodic is designed for a duration of 5 sec., the Task
for 1 sec. The speech is not only started, it also is joined. Method
<strong>join</strong> gives us back the well known chronology. This says, it makes
the program to wait until the task has finished, then it executes the
next command.</p>
<p>The output is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Help</span> <span class="n">me</span><span class="p">,</span> <span class="n">to</span> <span class="n">give</span> <span class="n">an</span> <span class="n">enthusiastic</span> <span class="n">welcome</span> <span class="n">to</span> <span class="n">our</span> <span class="n">speaker</span><span class="o">.</span>
<span class="n">blablabla</span>
<span class="n">Warm</span> <span class="n">applause</span><span class="o">.</span>
</pre></div>
</div>
<p>The whole program was executed in 8 sec. After the introduction, there
was a delay of 2 sec. until the speach began and the speach needed 5
sec. for its three syllables (with newline). Setting a duration for
the Task made another delay before the audience reacted.</p>
</div>
<div class="section" id="repeated-actions">
<h2>Repeated actions<a class="headerlink" href="#repeated-actions" title="Permalink to this headline">¶</a></h2>
<p><strong>Repeated</strong> is another subclass of Task and allows to do things
multiple times. Different from Periodic, here action is deciding if
and when to be called again. If action returns a positive number, this
will become the delay before the next execution. When it returns
<code class="docutils literal"><span class="pre">0</span></code>, it immediately will be called again and if it returns <code class="docutils literal"><span class="pre">-1</span></code>,
the loop ends. action may also return a bool, then <code class="docutils literal"><span class="pre">True</span></code> is like
<code class="docutils literal"><span class="pre">-1</span></code> and ends the loop, <code class="docutils literal"><span class="pre">False</span></code> is like <code class="docutils literal"><span class="pre">0</span></code>, the next calling
will follow immediately. Also <code class="docutils literal"><span class="pre">None</span></code> is allowed to be returned and
has the meaning of <code class="docutils literal"><span class="pre">0</span></code>. Like Periodic, you can limit the
number of executions with keyword argument <strong>num</strong>.</p>
<div class="code python3 highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">thread_task</span> <span class="kn">import</span> <span class="n">Repeated</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>


<span class="k">class</span> <span class="nc">Accelerate</span><span class="p">:</span>
    <span class="n">delay</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delay</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="n">delay</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span><span class="p">),</span>
            <span class="s1">&#39;Here I am&#39;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delay</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delay</span>


<span class="n">acc</span> <span class="o">=</span> <span class="n">Accelerate</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">Repeated</span><span class="p">(</span><span class="n">acc</span><span class="o">.</span><span class="n">step</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>We define class Accelerate to demonstrate the functionality of
class Repeated. Accelerate has a method step, that returns
numbers, which become smaller and smaller in every calling.
Setting an initial value <code class="docutils literal"><span class="pre">5</span></code> means, that the first
calling of method step will return <code class="docutils literal"><span class="pre">5</span></code>.</p>
<p>Repeated will call method step multiple times and it will react on its
return values. Per calling, the delay will become 1 sec. less.</p>
<p>The output was:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">17</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mf">35.719972</span> <span class="n">Here</span> <span class="n">I</span> <span class="n">am</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mf">40.720291</span> <span class="n">Here</span> <span class="n">I</span> <span class="n">am</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mf">44.720152</span> <span class="n">Here</span> <span class="n">I</span> <span class="n">am</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mf">47.720289</span> <span class="n">Here</span> <span class="n">I</span> <span class="n">am</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mf">49.720310</span> <span class="n">Here</span> <span class="n">I</span> <span class="n">am</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mf">50.720290</span> <span class="n">Here</span> <span class="n">I</span> <span class="n">am</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mf">50.720614</span> <span class="n">Here</span> <span class="n">I</span> <span class="n">am</span>
</pre></div>
</div>
</div>
<div class="section" id="tree-structured-tasks">
<h2>Tree structured Tasks<a class="headerlink" href="#tree-structured-tasks" title="Permalink to this headline">¶</a></h2>
<p>Task objects can not only be structured as chains, but also as
trees. When a chain link of a Task object calls method <strong>start</strong> of
another Task oject, this creates a parent-child dependency between
them and forms a tree structure of Task objects. The special benefit
is, that any call of parent methods <strong>stop</strong> or <strong>cont</strong> will also be
passed to the child.  This allows to stop and continue the whole
structure. We can encapsulate complex dependencies behind a very
simple API and we use only four methods for its execution: start,
stop, cont and join. All of them we have seen already.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">thread_task</span> <span class="kn">import</span> <span class="n">Task</span><span class="p">,</span> <span class="n">Periodic</span><span class="p">,</span> <span class="n">concat</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>


<span class="k">def</span> <span class="nf">print_it</span><span class="p">(</span><span class="n">txt</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span><span class="p">),</span>
        <span class="n">txt</span>
    <span class="p">)</span>


<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;switch&#39;</span><span class="p">:</span> <span class="s1">&#39;off&#39;</span><span class="p">}</span>


<span class="k">def</span> <span class="nf">set_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">data</span><span class="p">[</span><span class="s1">&#39;switch&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="n">print_it</span><span class="p">(</span><span class="s1">&#39;set switch to &#39;</span> <span class="o">+</span> <span class="n">value</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;switch&#39;</span><span class="p">]</span>
    <span class="n">print_it</span><span class="p">(</span><span class="s1">&#39;switch is &#39;</span> <span class="o">+</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;on&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>


<span class="n">t_set</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
    <span class="n">set_data</span><span class="p">,</span>  <span class="c1"># action</span>
    <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;on&#39;</span><span class="p">),</span>
    <span class="n">action_stop</span><span class="o">=</span><span class="n">print_it</span><span class="p">,</span>
    <span class="n">args_stop</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;*** t_set has been stopped&#39;</span><span class="p">,),</span>
    <span class="n">action_cont</span><span class="o">=</span><span class="n">print_it</span><span class="p">,</span>
    <span class="n">args_cont</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;*** t_set has been continued&#39;</span><span class="p">,)</span>
    <span class="p">)</span>

<span class="n">t_get</span> <span class="o">=</span> <span class="n">Periodic</span><span class="p">(</span>
    <span class="mi">1</span><span class="p">,</span>  <span class="c1"># intervall</span>
    <span class="n">get_data</span><span class="p">,</span>  <span class="c1"># action</span>
    <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">data</span><span class="p">,),</span>
    <span class="n">action_stop</span><span class="o">=</span><span class="n">print_it</span><span class="p">,</span>
    <span class="n">args_stop</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;*** t_get has been stopped&#39;</span><span class="p">,),</span>
    <span class="n">action_cont</span><span class="o">=</span><span class="n">print_it</span><span class="p">,</span>
    <span class="n">args_cont</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;*** t_get has been continued&#39;</span><span class="p">,),</span>
<span class="p">)</span>

<span class="n">t_manage</span> <span class="o">=</span> <span class="n">concat</span><span class="p">(</span>
    <span class="n">Task</span><span class="p">(</span>
        <span class="n">t_get</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>  <span class="c1"># action -- method start of a Periodic</span>
        <span class="n">action_stop</span><span class="o">=</span><span class="n">print_it</span><span class="p">,</span>
        <span class="n">args_stop</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;*** t_manage has been stopped&#39;</span><span class="p">,),</span>
        <span class="n">action_cont</span><span class="o">=</span><span class="n">print_it</span><span class="p">,</span>
        <span class="n">args_cont</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;*** t_manage has been continued&#39;</span><span class="p">,),</span>
    <span class="p">),</span>
    <span class="n">Task</span><span class="p">(</span>
        <span class="n">t_set</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>  <span class="c1"># action -- method start of a Task</span>
        <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mf">4.5</span><span class="p">,),</span>  <span class="c1"># delay</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">t_manage</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">sleep</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">t_manage</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">sleep</span><span class="p">(</span><span class="mf">3.5</span><span class="p">)</span>
<span class="n">t_manage</span><span class="o">.</span><span class="n">cont</span><span class="p">()</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">print_it</span><span class="p">(</span><span class="s1">&#39;*** t_manage has finished&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is a bit more complex than the other examples! We create 3 Task objects
<strong>t_set</strong>, <strong>t_get</strong> and <strong>t_manage</strong> and <strong>t_manage</strong> becomes parent of
<strong>t_get</strong> and <strong>t_set</strong>.</p>
<p><strong>data</strong> is a mutable data object. We use it for the communication
between tasks <strong>t_set</strong> and <strong>t_get</strong>. Function <strong>set_data</strong>
writes values to the data obeject, function <strong>get_data</strong> reads them.
In our case, <strong>get_data</strong> is wrapped into <strong>t_get</strong>, which is a <strong>Periodic</strong>, called once per second.
If <strong>get_data</strong> finds the value <code class="docutils literal"><span class="pre">on</span></code>, it returns <code class="docutils literal"><span class="pre">True</span></code>, which ends the <strong>Periodic</strong>.
<strong>set_data</strong> is wrapped into <strong>t_set</strong>, a <strong>Task</strong> object that sets the data object to <code class="docutils literal"><span class="pre">on</span></code>.</p>
<p><strong>t_manage</strong> starts <strong>t_get</strong> and then <strong>t_set</strong>, the second with a delay of 4.5 sec. We added
some text output to all three Task objects, which help us to understand, whats happening.</p>
<p>The output was:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">17</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">53.385352</span> <span class="n">switch</span> <span class="ow">is</span> <span class="n">off</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">54.385314</span> <span class="n">switch</span> <span class="ow">is</span> <span class="n">off</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">54.887189</span> <span class="o">***</span> <span class="n">t_set</span> <span class="n">has</span> <span class="n">been</span> <span class="n">stopped</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">54.887581</span> <span class="o">***</span> <span class="n">t_get</span> <span class="n">has</span> <span class="n">been</span> <span class="n">stopped</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">54.888227</span> <span class="o">***</span> <span class="n">t_manage</span> <span class="n">has</span> <span class="n">been</span> <span class="n">stopped</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">58.392112</span> <span class="o">***</span> <span class="n">t_manage</span> <span class="n">has</span> <span class="n">been</span> <span class="n">continued</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">58.392906</span> <span class="o">***</span> <span class="n">t_get</span> <span class="n">has</span> <span class="n">been</span> <span class="n">continued</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">58.889869</span> <span class="n">switch</span> <span class="ow">is</span> <span class="n">off</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">59.889856</span> <span class="n">switch</span> <span class="ow">is</span> <span class="n">off</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">00.889843</span> <span class="n">switch</span> <span class="ow">is</span> <span class="n">off</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">01.393279</span> <span class="o">***</span> <span class="n">t_set</span> <span class="n">has</span> <span class="n">been</span> <span class="n">continued</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">01.393537</span> <span class="nb">set</span> <span class="n">switch</span> <span class="n">to</span> <span class="n">on</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">01.889842</span> <span class="n">switch</span> <span class="ow">is</span> <span class="n">on</span>
<span class="mi">17</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">01.890447</span> <span class="o">***</span> <span class="n">t_manage</span> <span class="n">has</span> <span class="n">finished</span>
</pre></div>
</div>
<p>The first two rows were printed by <strong>get_data</strong> and
found the data object in its initial state. As
expected, there was a timespan of 1 sec. between
these two printings.</p>
<p>1.5 sec. after starting
<strong>t_manage</strong>, we stopped it and <strong>t_manage</strong>
stopped its two children before it stopped itself.
These three stoppings happend within a very short time.</p>
<p>Another 3.5 sec. later we continued <strong>t_manage</strong> and
it continued its two children.
<strong>t_get</strong> <em>remebers</em>, it was stopped in the middle of two
actions. This makes it to wait 0.5 sec. until its next
call of <strong>get_data</strong>.
<strong>t_set</strong> had a rest
delay of 3 sec., which made it answer this timespan
after its continuation. Directly after this
first reaction, it called <strong>set_data</strong>, which
changed the data object.</p>
<p>When <strong>get_data</strong> came to its next reading, it found
the switch <code class="docutils literal"><span class="pre">on</span></code> and returned <code class="docutils literal"><span class="pre">True</span></code>. This
ended Periodic <strong>t_set</strong>, the last living child thread.
Joining <strong>t_manage</strong> allowed us to print a final message,
when all threads have ended.</p>
</div>
</div>
<div class="section" id="module-thread_task">
<span id="api-documentation"></span><h1>API documentation<a class="headerlink" href="#module-thread_task" title="Permalink to this headline">¶</a></h1>
<p>organize and run thread tasks,
which can be stopped, continued and restarted.</p>
<div class="section" id="static-methods">
<h2>Static methods<a class="headerlink" href="#static-methods" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="thread_task.concat">
<code class="descclassname">thread_task.</code><code class="descname">concat</code><span class="sig-paren">(</span><em>*tasks: thread_task.Task</em>, <em>copy: bool = False</em><span class="sig-paren">)</span> &#x2192; thread_task.Task<a class="reference internal" href="_modules/thread_task.html#concat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thread_task.concat" title="Permalink to this definition">¶</a></dt>
<dd><p>Concats a number of Task objects and returns a chain of tasks.
This modifies the Task objects. If you need them unchanged,
set the copy flag.</p>
<dl class="docutils">
<dt>Positional Arguments:</dt>
<dd><dl class="first last docutils">
<dt>*tasks:</dt>
<dd>any number of Task objects</dd>
</dl>
</dd>
<dt>Keyword Arguments:</dt>
<dd><dl class="first last docutils">
<dt>copy:</dt>
<dd>Flag, if resulting Task objects will be copied</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="task">
<h3>Task<a class="headerlink" href="#task" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="thread_task.Task">
<em class="property">class </em><code class="descclassname">thread_task.</code><code class="descname">Task</code><span class="sig-paren">(</span><em>action: typing.Callable</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/thread_task.html#Task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thread_task.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses multithreading for tasks or chains of tasks.
The most simple case is a callable object.
Subsequent tasks or chains of tasks can be added with method append().</p>
<dl class="docutils">
<dt>Positional Arguments:</dt>
<dd><dl class="first last docutils">
<dt>action:</dt>
<dd>object which will be executed (f.i. a function).</dd>
</dl>
</dd>
<dt>Keyword Arguments:</dt>
<dd><dl class="first last docutils">
<dt>args: tuple=()</dt>
<dd>argument list of action</dd>
<dt>kwargs: dict={}</dt>
<dd>keyword arguments of action</dd>
<dt>action_stop: typing.Callable=None</dt>
<dd>object (f.i. a function),
which is called when task is stopped.</dd>
<dt>args_stop: tuple=()</dt>
<dd>argument list of action_stop</dd>
<dt>kwargs_stop: dict={}</dt>
<dd>keyword arguments of action_stop</dd>
<dt>action_cont: typing.Callable=None</dt>
<dd>object (f.i. a function),
which is called when task is continued.</dd>
<dt>args_cont: tuple=()</dt>
<dd>argument list of action_cont</dd>
<dt>kwargs_cont: dict={}</dt>
<dd>keyword arguments of action_cont</dd>
<dt>join: bool=False</dt>
<dd>flag if contained task will be joined</dd>
<dt>duration: Number=None</dt>
<dd>duration of task (if action returns earlier, task will wait)</dd>
<dt>exc_handler: typing.Callable=None</dt>
<dd>user defined handler of exceptions</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="thread_task.Task.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>*tasks</em>, <em>copy=False</em><span class="sig-paren">)</span> &#x2192; thread_task.Task<a class="reference internal" href="_modules/thread_task.html#Task.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thread_task.Task.append" title="Permalink to this definition">¶</a></dt>
<dd><p>appends a task or a chain of tasks (both must be root tasks)</p>
</dd></dl>

<dl class="method">
<dt id="thread_task.Task.cont">
<code class="descname">cont</code><span class="sig-paren">(</span><em>delay: numbers.Number = None</em><span class="sig-paren">)</span> &#x2192; thread_task.Task<a class="reference internal" href="_modules/thread_task.html#Task.cont"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thread_task.Task.cont" title="Permalink to this definition">¶</a></dt>
<dd><p>continues a stopped task (must be a root task)</p>
<dl class="docutils">
<dt>Keyword Arguments:</dt>
<dd><dl class="first last docutils">
<dt>delay:</dt>
<dd>sets waiting time for next action execution (in seconds)</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="thread_task.Task.join">
<code class="descname">join</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/thread_task.html#Task.join"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thread_task.Task.join" title="Permalink to this definition">¶</a></dt>
<dd><p>joins the thread of the task</p>
</dd></dl>

<dl class="method">
<dt id="thread_task.Task.start">
<code class="descname">start</code><span class="sig-paren">(</span><em>delay: numbers.Number = None</em><span class="sig-paren">)</span> &#x2192; thread_task.Task<a class="reference internal" href="_modules/thread_task.html#Task.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thread_task.Task.start" title="Permalink to this definition">¶</a></dt>
<dd><p>starts execution of task
(finished or stopped tasks may be started again)</p>
<dl class="docutils">
<dt>Keyword Arguments:</dt>
<dd><dl class="first last docutils">
<dt>delay:</dt>
<dd>sets the waiting time, before start occurs (in seconds)</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="thread_task.Task.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/thread_task.html#Task.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thread_task.Task.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops execution as fast as possible.  Allows to continue with
method <code class="docutils literal"><span class="pre">cont()</span></code> or restart with method <code class="docutils literal"><span class="pre">start()</span></code>.  Already
finished tasks silently do nothing</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.action_cont">
<code class="descname">action_cont</code><a class="headerlink" href="#thread_task.Task.action_cont" title="Permalink to this definition">¶</a></dt>
<dd><p>callable, which is called in case of continuing the task</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.action_stop">
<code class="descname">action_stop</code><a class="headerlink" href="#thread_task.Task.action_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>callable, which is called in case of stopping the task</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.activity">
<code class="descname">activity</code><a class="headerlink" href="#thread_task.Task.activity" title="Permalink to this definition">¶</a></dt>
<dd><p>actual activity</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.activity_no_lock">
<code class="descname">activity_no_lock</code><a class="headerlink" href="#thread_task.Task.activity_no_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>actual activity</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.args_cont">
<code class="descname">args_cont</code><a class="headerlink" href="#thread_task.Task.args_cont" title="Permalink to this definition">¶</a></dt>
<dd><p>arguments of action_cont,
which is called in case of continuing the task</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.args_stop">
<code class="descname">args_stop</code><a class="headerlink" href="#thread_task.Task.args_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>arguments of action_stop, which is called in case of stopping the task</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.exc_default">
<code class="descname">exc_default</code><a class="headerlink" href="#thread_task.Task.exc_default" title="Permalink to this definition">¶</a></dt>
<dd><p>default exception</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.exc_handler">
<code class="descname">exc_handler</code><a class="headerlink" href="#thread_task.Task.exc_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>exception handler</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.kwargs_cont">
<code class="descname">kwargs_cont</code><a class="headerlink" href="#thread_task.Task.kwargs_cont" title="Permalink to this definition">¶</a></dt>
<dd><p>keyword arguments of action_cont,
which is called in case of continuing the task</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.kwargs_stop">
<code class="descname">kwargs_stop</code><a class="headerlink" href="#thread_task.Task.kwargs_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>keyword arguments of action_stop,
which is called in case of stopping the task</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.lock">
<code class="descname">lock</code><a class="headerlink" href="#thread_task.Task.lock" title="Permalink to this definition">¶</a></dt>
<dd><p>the tasks lock</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.root">
<code class="descname">root</code><a class="headerlink" href="#thread_task.Task.root" title="Permalink to this definition">¶</a></dt>
<dd><p>root task of the chain.
A root task returns itself</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.state">
<code class="descname">state</code><a class="headerlink" href="#thread_task.Task.state" title="Permalink to this definition">¶</a></dt>
<dd><p>current state of the task (or chain of tasks)</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.state_no_lock">
<code class="descname">state_no_lock</code><a class="headerlink" href="#thread_task.Task.state_no_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>current state of the task (or chain of tasks)</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.time_action">
<code class="descname">time_action</code><a class="headerlink" href="#thread_task.Task.time_action" title="Permalink to this definition">¶</a></dt>
<dd><p>time of current (activity is ACTIVITY_BUSY) or next action,
is in the format of time.time()</p>
</dd></dl>

<dl class="attribute">
<dt id="thread_task.Task.time_action_no_lock">
<code class="descname">time_action_no_lock</code><a class="headerlink" href="#thread_task.Task.time_action_no_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>time of current (activity is ACTIVITY_BUSY) or next action,
is in the format of time.time()</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sleep">
<h3>Sleep<a class="headerlink" href="#sleep" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="thread_task.Sleep">
<em class="property">class </em><code class="descclassname">thread_task.</code><code class="descname">Sleep</code><span class="sig-paren">(</span><em>seconds: numbers.Number</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/thread_task.html#Sleep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thread_task.Sleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Sleeps and can be stopped</p>
<dl class="docutils">
<dt>Positional Arguments:</dt>
<dd>seconds: duration of sleeping</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="periodic">
<h3>Periodic<a class="headerlink" href="#periodic" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="thread_task.Periodic">
<em class="property">class </em><code class="descclassname">thread_task.</code><code class="descname">Periodic</code><span class="sig-paren">(</span><em>intervall: numbers.Number</em>, <em>action: typing.Callable</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/thread_task.html#Periodic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thread_task.Periodic" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses multithreading for periodic actions (control comes back immediately).</p>
<dl class="docutils">
<dt>Positional Arguments:</dt>
<dd><dl class="first last docutils">
<dt>intervall:</dt>
<dd>intervall between two calls of action (in seconds)</dd>
<dt>action:</dt>
<dd><p class="first">object, which is repeatedly called (f.i. a function)</p>
<dl class="last docutils">
<dt>Must return a bool or None:</dt>
<dd><dl class="first last docutils">
<dt>True:</dt>
<dd>ends the loop</dd>
<dt>False, None:</dt>
<dd>next call will follow
(if not reached limit of num)</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>Keyword Arguments:</dt>
<dd><dl class="first last docutils">
<dt>args: tuple=()</dt>
<dd>argument list of action</dd>
<dt>kwargs: dict={}</dt>
<dd>keyword arguments of action</dd>
<dt>action_stop: typing.Callable=None</dt>
<dd>object (f.i. a function), which is called when task is stopped.</dd>
<dt>args_stop: tuple=()</dt>
<dd>argument list of action_stop</dd>
<dt>kwargs_stop: dict={}</dt>
<dd>keyword arguments of action_stop</dd>
<dt>action_cont: typing.Callable=None</dt>
<dd>object (f.i. a function), is called when task is continued.</dd>
<dt>args_cont: tuple=()</dt>
<dd>argument list of action_cont</dd>
<dt>kwargs_cont: dict={}</dt>
<dd>keyword arguments of action_cont</dd>
<dt>duration: Number=None</dt>
<dd>duration of task, if action returns earlier, task will wait</dd>
<dt>netto_time: bool=False</dt>
<dd>flag, that waiting is netto (execution of action counts extra)</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="repeated">
<h3>Repeated<a class="headerlink" href="#repeated" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="thread_task.Repeated">
<em class="property">class </em><code class="descclassname">thread_task.</code><code class="descname">Repeated</code><span class="sig-paren">(</span><em>action: typing.Callable</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/thread_task.html#Repeated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thread_task.Repeated" title="Permalink to this definition">¶</a></dt>
<dd><p>Organizes repeated actions with multithreading</p>
<dl class="docutils">
<dt>Positional Arguments:</dt>
<dd><dl class="first last docutils">
<dt>action:</dt>
<dd><p class="first">callable object, which is repeatedly called (f.i. a function).</p>
<dl class="last docutils">
<dt>Must return a number, a bool or None:</dt>
<dd><dl class="first last docutils">
<dt>True, -1:</dt>
<dd>end the loop</dd>
<dt>False, None:</dt>
<dd>next call follows directly (if limit num not reached)</dd>
<dt>positive number:</dt>
<dd>time gap between the current and the next call</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>Keyword Arguments:</dt>
<dd><dl class="first last docutils">
<dt>args: tuple=()</dt>
<dd>argument list of action</dd>
<dt>kwargs: dict={}</dt>
<dd>keyword arguments of action</dd>
<dt>action_stop: Callable=None</dt>
<dd>object (f.i. a function), is called when task is stopped.</dd>
<dt>args_stop: tuple=()</dt>
<dd>argument list of action_stop</dd>
<dt>kwargs_stop: dict={}</dt>
<dd>keyword arguments of action_stop</dd>
<dt>action_cont: Callable=None</dt>
<dd>object (f.i. a function), is called when task is continued.</dd>
<dt>args_cont: tuple=()</dt>
<dd>argument list of action_cont</dd>
<dt>kwargs_cont: dict={}</dt>
<dd>keyword arguments of action_cont</dd>
<dt>duration: Number=None</dt>
<dd>duration of task (if action returns earlier, task will wait)</dd>
<dt>netto_time: bool=False</dt>
<dd>flag, that waiting is netto (execution of action counts extra)</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="index">
<h1>Index<a class="headerlink" href="#index" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Christoph Gaukel

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>